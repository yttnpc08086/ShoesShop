<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <th:block th:replace="~{lib/inject}"></th:block>
    <style>
        .divider:after,
        .divider:before {
            content: "";
            flex: 1;
            height: 1px;
            background: #eee;
        }

        .h-custom {
            height: calc(100% - 73px);
        }

        @media (max-width: 450px) {
            .h-custom {
                height: 100%;
            }
        }

        /* Custom styles for the username and password input fields on the same row */
        .form-row {
            display: flex;
            gap: 15px; /* Gap between the two input fields */
        }

        .form-row .form-outline {
            flex: 1; /* Make the input fields equal in width */
        }

        @media (max-width: 768px) {
            /* On smaller screens, stack the input fields vertically */
            .form-row {
                flex-direction: column;
            }
        }

        .invalid-feedback {
            display: none; /* Initially hide error messages */
        }

        .is-invalid + .invalid-feedback {
            display: block; /* Show error messages when input is invalid */
        }
    </style>
</head>
<body>
<section class="vh-100">
    <div class="container-fluid h-custom">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-md-8 col-lg-6 col-xl-4">
                <form id="registerForm" th:action="@{/register}" method="post" th:object="${user}" novalidate>
                    <h1 class="text-center mb-4">REGISTER</h1>
                    <div class="form-row mb-4">
                        <div data-mdb-input-init class="form-outline">
                            <label class="form-label" for="username">Username</label>
                            <input type="text" id="username" name="username" class="form-control form-control-lg"
                                   placeholder="Enter username" th:field="*{username}" required/>
                            <div id="usernameError" class="invalid-feedback">Please enter a username.</div>
                        </div>

                        <div data-mdb-input-init class="form-outline">
                            <label class="form-label" for="password">Password</label>
                            <input type="password" id="password" name="password" class="form-control form-control-lg"
                                   placeholder="Enter password" th:field="*{password}" required/>
                            <div id="passwordError" class="invalid-feedback">Please enter a password.</div>
                        </div>
                    </div>
                    <div class="form-row mb-4">
                        <div data-mdb-input-init class="form-outline mb-3">
                            <label class="form-label" for="fullname">Fullname</label>
                            <input type="text" id="fullname" name="fullname" class="form-control form-control-lg"
                                   placeholder="Enter fullname" th:field="*{fullname}" required/>
                            <div id="fullnameError" class="invalid-feedback">Fullname should not contain special characters or be empty.</div>
                        </div>
                        <div data-mdb-input-init class="form-outline mb-3">
                            <label class="form-label" for="phone">Phone</label>
                            <input type="text" id="phone" name="phone" class="form-control form-control-lg"
                                   placeholder="Enter phone number" th:field="*{phone}" required/>
                            <div id="phoneError" class="invalid-feedback">Phone number must be 10 digits.</div>
                        </div>
                    </div>

                    <div class="form-row mb-4">
                        <div data-mdb-input-init class="form-outline mb-3">
                            <label class="form-label" for="email">Email</label>
                            <input type="email" id="email" name="email" class="form-control form-control-lg"
                                   placeholder="Enter email" th:field="*{email}" required/>
                            <div id="emailError" class="invalid-feedback">Please enter a valid email.</div>
                        </div>
                        <div data-mdb-input-init class="form-outline mb-3">
                            <label class="form-label" for="address">Address</label>
                            <input type="text" id="address" name="address" class="form-control form-control-lg"
                                   placeholder="Enter address" th:field="*{address}" required/>
                            <div id="addressError" class="invalid-feedback">Please enter your address.</div>
                        </div>
                    </div>


                    <div class="text-center text-lg-start mt-4 pt-2">
                        <button type="submit" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-lg"
                                style="padding-left: 2.5rem; padding-right: 2.5rem;">Register
                        </button>
                        <p class="small fw-bold mt-2 pt-1 mb-0">Do you have an account? <a href="/login" class="link-danger">Login</a>
                        </p>
                    </div>
                </form>
            </div>

            <div class="col-md- col-lg-6 col-xl-5">
                <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp"
                     class="img-fluid" alt="Sample image">
            </div>
        </div>
    </div>

    <!--    <div class="d-flex flex-column flex-md-row text-center text-md-start justify-content-between py-4 px-4 px-xl-5 bg-primary">-->
    <!--        <div class="text-white mb-3 mb-md-0">Copyright © 2020. All rights reserved.</div>-->
    <!--        <div>-->
    <!--            <a href="#!" class="text-white me-4"><i class="fab fa-facebook-f"></i></a>-->
    <!--            <a href="#!" class="text-white me-4"><i class="fab fa-twitter"></i></a>-->
    <!--            <a href="#!" class="text-white me-4"><i class="fab fa-google"></i></a>-->
    <!--            <a href="#!" class="text-white"><i class="fab fa-linkedin-in"></i></a>-->
    <!--        </div>-->
    <!--    </div>-->
</section>
<script>
    document.getElementById("registerForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Ngăn chặn gửi biểu mẫu nếu có lỗi

        let isValid = true;

        // Lấy các trường đầu vào
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();
        const fullname = document.getElementById("fullname").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const email = document.getElementById("email").value.trim();
        const address = document.getElementById("address").value.trim();

        // Kiểm tra username không được rỗng hoặc chỉ chứa khoảng trắng
        if (username.length === 0) {
            document.getElementById("usernameError").style.display = "block";
            isValid = false;
        } else {
            document.getElementById("usernameError").style.display = "none";
        }

        // Kiểm tra password không được rỗng hoặc chỉ chứa khoảng trắng
        if (password.length === 0) {
            document.getElementById("passwordError").style.display = "block";
            isValid = false;
        } else {
            document.getElementById("passwordError").style.display = "none";
        }

        // Kiểm tra fullname
        const fullnameRegex = /^(?!\s)([a-zA-Z0-9À-ÿ!@#$%^&*()_\-+=?/\|`~]+(\s[a-zA-Z0-9À-ÿ!@#$%^&*()_\-+=?/\|`~]+)*)?$/;

        if (!fullnameRegex.test(fullname) || fullname.length === 0) {
            document.getElementById("fullnameError").style.display = "block";
            isValid = false;
        } else {
            document.getElementById("fullnameError").style.display = "none";
        }



        // Kiểm tra số điện thoại phải là 10 chữ số và không rỗng hoặc chỉ chứa khoảng trắng
        const phoneRegex = /^\d{10}$/;
        if (!phoneRegex.test(phone) || phone.length === 0) {
            document.getElementById("phoneError").style.display = "block";
            isValid = false;
        } else {
            document.getElementById("phoneError").style.display = "none";
        }

        // Kiểm tra định dạng email và không rỗng hoặc chỉ chứa khoảng trắng
        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!emailRegex.test(email) || email.length === 0) {
            document.getElementById("emailError").style.display = "block";
            isValid = false;
        } else {
            document.getElementById("emailError").style.display = "none";
        }

        // Kiểm tra địa chỉ không được rỗng hoặc chỉ chứa khoảng trắng
        if (address.length === 0) {
            document.getElementById("addressError").style.display = "block";
            isValid = false;
        } else {
            document.getElementById("addressError").style.display = "none";
        }

        // Nếu tất cả đều hợp lệ, gửi biểu mẫu
        if (isValid) {
            this.submit();
        }
    });
</script>



</body>
</html>